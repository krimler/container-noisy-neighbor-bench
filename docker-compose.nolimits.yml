# MODE: No CPU constraints at all - raw thread-level CFS scheduling
services:
  api-gateway:
    build: ./services
    container_name: api-gateway
    environment: [SERVICE_NAME=api-gateway, PORT=5000]
    ports: ["5001:5000"]
    deploy: {resources: {limits: {memory: 256M}}}
    networks: [pocnet]
  user-service:
    build: ./services
    container_name: user-service
    environment: [SERVICE_NAME=user-service, PORT=5000]
    ports: ["5002:5000"]
    deploy: {resources: {limits: {memory: 256M}}}
    networks: [pocnet]
  order-service:
    build: ./services
    container_name: order-service
    environment: [SERVICE_NAME=order-service, PORT=5000]
    ports: ["5003:5000"]
    deploy: {resources: {limits: {memory: 256M}}}
    networks: [pocnet]
  payment-service:
    build: ./services
    container_name: payment-service
    environment: [SERVICE_NAME=payment-service, PORT=5000]
    ports: ["5004:5000"]
    deploy: {resources: {limits: {memory: 256M}}}
    networks: [pocnet]
  batch-processor:
    build: ./services
    container_name: batch-processor
    environment: [SERVICE_NAME=batch-processor, PORT=5000]
    ports: ["5005:5000"]
    deploy: {resources: {limits: {memory: 512M}}}
    networks: [pocnet]
networks:
  pocnet: {driver: bridge}
